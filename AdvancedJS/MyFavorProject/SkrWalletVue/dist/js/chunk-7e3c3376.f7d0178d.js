(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7e3c3376"],{"282d":function(t,e,r){"use strict";var s=r("b4e3");r.n(s).a},"51bb":function(t,e,r){"use strict";r.r(e);var s=r("d104").a,a=(r("282d"),r("17cc")),n=Object(a.a)(s,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("v-card",{staticClass:"txcard"},[r("v-text-field",{staticClass:"tokenField",attrs:{label:"Token","single-line":"",solo:"",light:"",readonly:"",value:t.$store.state.tokenType,"background-color":"#E1F9EC"}}),r("v-layout",{staticClass:"main",attrs:{"justify-space-between":"","align-center":""}},[r("v-text-field",{staticClass:"amountField",attrs:{label:"转账金额",suffix:"ETH"==t.$store.state.tokenType?"ether":t.$store.state.tokenType.toLowerCase(),rules:[t.rules.type]},on:{input:function(e){return t.changeAmount(e)}}}),r("v-text-field",{staticClass:"gaspriceField",attrs:{label:"GasPrice",suffix:"Gwei",rules:[t.rules.type,t.rules.counter]},model:{value:t.txGasPrice,callback:function(e){t.txGasPrice=e},expression:"txGasPrice"}})],1),r("v-text-field",{staticClass:"targetAddr",attrs:{label:"目标地址","prepend-inner-icon":"near_me","single-line":"",box:"",clearable:""},on:{input:function(e){return t.changeAddr(e)}}}),r("v-btn",{staticClass:"white--text sendtx-btn",attrs:{block:"",color:"#55A47E"},on:{click:t.sendTx}},[t._v("发送\n            "),r("v-icon",{attrs:{right:"",color:"white"}},[t._v("present_to_all")])],1),r("v-progress-linear",{staticClass:"txProgress",attrs:{indeterminate:t.txSending,color:"rgb(0,255,184)","background-color":"#E1F9EC"}})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.txHash,expression:"txHash!=''"}],staticClass:"txtip-card"},[r("v-tooltip",{attrs:{bottom:"",dark:"",color:"rgb(0, 255, 184)","content-class":"black--text"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[r("a",t._g({ref:"txlink",attrs:{target:"_blank",href:"https://rinkeby.etherscan.io/tx/"+t.txHash}},s),[t._v(t._s(t.txHash))])]}}])},[r("span",[t._v("查看交易详情")])])],1)],1)},[],!1,null,"457317fc",null);e.default=n.exports},"578a":function(t,e,r){var s=r("471d");s(s.S,"Object",{is:r("ac77")})},"6b2e":function(t,e,r){t.exports=r("9f90")},"9f90":function(t,e,r){r("578a"),t.exports=r("836e").Object.is},ac77:function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},b4e3:function(t,e,r){},d104:function(t,e,r){"use strict";(function(t){r("b06f");var s=r("6b2e"),a=r.n(s),n=(r("b5aa"),r("2c46")),i=(r("5c07"),r("53da"),r("2556"),r("d0f8"),r("5ea9")),o=r.n(i),c=(r("ffd9"),"http://154.8.215.126:4000");e.a={name:"SendTx",data:function(){return{txAmount:"",txToAddr:"",txGasPrice:"20",txHash:"",txSending:!1,rules:{counter:function(t){return t>=20||"GasPrice过小可能导致交易失败！"},type:function(t){return/^(([1-9]+\.?)|([1-9]*0\.))[0-9]*$/.test(t)||"请输入有效数字！"},addrFormat:function(t){return/^0x[0-9a-fA-F]{40}$/.test(t)||"请输入正确格式的地址!"}}}},computed:{tokenCoin:function(){return"ETH"==this.$store.state.tokenType?"ether":this.$store.state.tokenType.toLowerCase()}},methods:{changeAmount:function(t){this.txAmount=t},changeAddr:function(t){this.txToAddr=t},changeGasPrice:function(t){this.txGasPrice=t},sendTx:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var s,n,i,u,l,d,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.txAmount&&this.txToAddr&&this.txGasPrice)){e.next=76;break}if(!(a()(Number(this.txAmount),NaN)||Number(this.txAmount)<=0)){e.next=6;break}return o.a.warning({title:"Warning",message:"转账金额输入有误 !",color:"red",timeout:2e3}),e.abrupt("return");case 6:if(!a()(Number(this.txGasPrice),NaN)){e.next=10;break}return o.a.warning({title:"Warning",message:"GasPrice输入有误 !",color:"red",timeout:2e3}),e.abrupt("return");case 10:if(s=r("8554"),s.getweb3().utils.isAddress(this.txToAddr)){e.next=16;break}return o.a.warning({title:"Error",message:"地址格式错误 !",color:"red",timeout:2e3}),e.abrupt("return");case 16:if("0x00"!=this.$store.state.accountAddr&&""!=this.$store.state.globalPrivatekey){e.next=20;break}return o.a.warning({message:"请先创建或加载钱包 !",color:"red",timeout:2e3}),e.abrupt("return");case 20:if(n=Number(this.$store.state.accountBalance),i=Number(this.txAmount),!(n<=i)){e.next=30;break}return o.a.error({title:"Error",message:"钱包余额不足 !",timeout:2e3}),e.abrupt("return");case 30:if(this.txSending=!0,u="".concat(c,"/users/sendtx"),l="".concat(c,"/users/senderc20tx"),e.prev=33,"ETH"!=this.$store.state.tokenType){e.next=40;break}return e.next=37,t({method:"post",url:u,data:{privatekey:this.$store.state.globalPrivatekey,txAmount:this.txAmount,txFromAddr:this.$store.state.accountAddr,txToAddr:this.txToAddr,txGasPrice:this.txGasPrice}});case 37:d=e.sent,e.next=43;break;case 40:return e.next=42,t({method:"post",url:l,data:{privatekey:this.$store.state.globalPrivatekey,txAmount:this.txAmount,txFromAddr:this.$store.state.accountAddr,txToAddr:this.txToAddr,txGasPrice:this.txGasPrice,contractABI:this.$store.state.tokenContractABI,contractAddr:this.$store.state.tokenContractAddr}});case 42:d=e.sent;case 43:if(this.txHash=d.data.info.transactionHash,this.txSending=!1,o.a.success({title:"SUCCESS",message:"转账成功 !",timeout:2e3,position:"bottomCenter"}),(x=this.$refs.txlink).style.visibility="visible",o.a.success({message:"交易Hash",messageColor:"rgb(0, 255, 184)",timeout:2e4,displayMode:2,resetOnHover:!0,target:".txtip-card",progressBarColor:"rgb(0, 255, 184)",transitionIn:"flipInX",transitionOut:"flipOutX",color:"grey",theme:"dark",onClosing:function(){x.style.visibility="hidden"}}),e.prev=52,"ETH"!=this.$store.state.tokenType){e.next=59;break}return e.next=56,this.$store.dispatch("refreshBalance");case 56:e.next=62;break;case 59:return e.next=61,this.$store.dispatch("refreshERC20Balance");case 61:case 62:e.next=67;break;case 64:e.prev=64,e.t0=e.catch(52);case 67:e.next=74;break;case 69:e.prev=69,e.t1=e.catch(33),this.txSending=!1,o.a.info({title:"Error",message:"很遗憾,交易失败 !",color:"red",timeout:2e3});case 74:e.next=78;break;case 76:o.a.warning({message:"请正确输入转账金额、目标地址和GasPrice !",timeout:2e3,color:"red"});case 78:case"end":return e.stop()}},e,this,[[33,69],[52,64]])}));return function(){return e.apply(this,arguments)}}()}}}).call(this,r("7f43e"))}}]);