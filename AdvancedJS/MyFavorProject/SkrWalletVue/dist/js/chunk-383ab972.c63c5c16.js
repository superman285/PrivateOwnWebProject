(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-383ab972"],{"0037":function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"upload-field"},[o("input",{ref:"uploadInput",staticClass:"upload-input",attrs:{type:"file"},on:{change:t.uploadFile}}),o("v-btn",{staticClass:"uploadBtn",attrs:{color:"#6EC3A8"}},[o("span",[t._v("File  ")]),o("i",{staticClass:"material-icons upico"},[t._v("backup")])]),o("input",{ref:"uploadTip",staticClass:"upload-filetip",attrs:{readonly:"",type:"text",placeholder:"click or drag file here"}})],1)},a=[],n=(o("3a23"),{name:"v-upload",data:function(){return{}},methods:{uploadFile:function(){console.log(this.$refs);var t=this.$refs.uploadInput.files[0];this.$store.state.globalKeystore=t;var e=this.$refs.uploadTip;e.value=t.name}}}),r=n,i=(o("8f5f"),o("17cc")),c=Object(i["a"])(r,s,a,!1,null,"742e8dee",null);e["a"]=c.exports},"152f":function(t,e,o){},2436:function(t,e,o){"use strict";var s=o("7510"),a=o.n(s);a.a},"24d0":function(t,e,o){t.exports=o.p+"img/kspng.68ab7744.png"},"3a23":function(t,e,o){var s=o("694f").f,a=Function.prototype,n=/^\s*function ([^ (]*)/,r="name";r in a||o("3a0f")&&s(a,r,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},7510:function(t,e,o){},"8f5f":function(t,e,o){"use strict";var s=o("152f"),a=o.n(s);a.a},a084:function(t,e,o){"use strict";(function(t){o("3a23"),o("b5aa");var s=o("2c46"),a=o("5ea9"),n=o.n(a),r=(o("ffd9"),o("0037"));e["a"]={name:"AccessWallet",components:{"v-upload":r["a"]},data:function(){return{accesstitle:"Load Your Own Wallet",unlockMethod:"keystore",privatekey:"",showpwd:!1,password:"",kscard:!0,pkcard:!0,pklayout:!1,kslayout:!1,progressRunning:!1}},methods:{look:function(){console.log(this.unlockMethod),console.log(this.privatekey)},ksload:function(){this.accesstitle="Load Wallet via Keystore",this.pkcard=!1,this.kscard=!1,this.kslayout=!0},pkload:function(){this.accesstitle="Load Wallet via Privatekey",this.pkcard=!1,this.kscard=!1,this.pklayout=!0},back:function(){console.log("back"),this.password="",this.privatekey="",this.pkcard=!0,this.kscard=!0,this.pklayout=!1,this.kslayout=!1,this.progressRunning=!1},changePrivatekey:function(t){this.privatekey=t},unlockWithPk:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var s,a,r,i,c,l,u,p=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=o("8554"),a=s.getweb3(),""!=this.privatekey){e.next=5;break}return n.a.warning({message:"未填写私钥 !",color:"red",timeout:1e3}),e.abrupt("return");case 5:if(a.utils.isHexStrict(this.privatekey)&&66==this.privatekey.length){e.next=9;break}return console.log("私钥格式错误"),n.a.warning({title:"Error",message:"私钥错误 ! (别忘了以0x开头)",color:"red",timeout:2e3}),e.abrupt("return");case 9:return console.log(this.privatekey),this.progressRunning=!0,r="http://127.0.0.1:4000/users/unlockwithprivatekey",e.prev=12,e.next=15,t({method:"post",url:r,data:{privatekey:this.privatekey}});case 15:i=e.sent,console.log("result",i),0==i.data.code?(console.log("unlock 成功"),setTimeout(function(){p.progressRunning=!1,n.a.success({title:"OK",message:"钱包载入成功 !",timeout:1e3,position:"bottomCenter"})},1e3),c=i.data.info.account.address,this.$store.commit("setAccountAddr",c),l=i.data.info.account.privateKey,this.$store.state.globalPrivatekey=l,console.log("全局私钥",this.$store.state.globalPrivatekey),u=i.data.info.balance,this.$store.commit("setAccountBalance",u),console.log("accBalance",u),setTimeout(function(){n.a.show({message:"即将自动跳转到首页 !",timeout:4e3,position:"bottomCenter",buttons:[["<button><b>点击跳转</b></button>",function(t,e){t.hide({transitionOut:"fadeOut"},e,"button")}]],theme:"dark",onClosing:function(){console.log("this指向",p);var t=p.$store.state.headerTabs;console.log(t),t[0].click()}})},2e3)):300==i.data.code?(this.progressRunning=!1,console.log("getBalance failed")):(this.progressRunning=!1,console.log("load wallet failed"),n.a.info({title:"Error",message:"钱包载入失败 !",color:"red",timeout:2e3})),e.next=25;break;case 20:e.prev=20,e.t0=e["catch"](12),this.progressRunning=!1,console.log("打印出错啦",e.t0),n.a.info({title:"Error",message:"钱包载入失败 !",color:"red",timeout:2e3});case 25:case"end":return e.stop()}},e,this,[[12,20]])}));function a(){return e.apply(this,arguments)}return a}(),unlockWithKs:function(){var e=this;console.log(this.$refs);var o=this.$store.state.globalKeystore;console.log(o.name);var a=new FormData;if(a.append("file",o),o.name){var r=this.password;if(""===r)return console.log("请输入ks的密码"),void n.a.warning({message:"请输入keystore密码 !",timeout:2e3});var i=new FileReader;i.readAsText(o),i.onload=Object(s["a"])(regeneratorRuntime.mark(function o(){var s,a,i,c,l,u,p=this;return regeneratorRuntime.wrap(function(o){while(1)switch(o.prev=o.next){case 0:o.prev=0,s=JSON.parse(this.result),console.log("我读出来的？"),console.log(s),o.next=11;break;case 6:return o.prev=6,o.t0=o["catch"](0),console.log("读取失败",o.t0),n.a.info({title:"Error",message:"keystore文件读取失败 !",color:"red",timeout:2e3}),o.abrupt("return");case 11:return e.progressRunning=!0,a="http://127.0.0.1:4000/users/unlockwithkeystore",o.prev=13,o.next=16,t({method:"post",url:a,data:{password:r,keystore:s}});case 16:i=o.sent,console.log("file result",i),0==i.data.code?(console.log("unlock 成功"),setTimeout(function(){n.a.success({title:"OK",message:"钱包载入成功 !",timeout:1e3,position:"bottomCenter"}),e.progressRunning=!1},1e3),c=i.data.info.account.address,e.$store.commit("setAccountAddr",c),l=i.data.info.account.privateKey,e.$store.state.globalPrivatekey=l,console.log("全局私钥",e.$store.state.globalPrivatekey),u=i.data.info.balance,e.$store.commit("setAccountBalance",u),console.log("accBalance",u),setTimeout(function(){n.a.show({message:"即将自动跳转到首页 !",timeout:4e3,position:"bottomCenter",buttons:[["<button><b>点击跳转</b></button>",function(t,e){t.hide({transitionOut:"fadeOut"},e,"button")}]],theme:"dark",onClosing:function(){console.log("this指向",p);var t=e.$store.state.headerTabs;console.log(t),t[0].click()}})},2e3)):300==i.data.code?(console.log("getBalance failed"),e.progressRunning=!1):(console.log("load wallet failed"),e.progressRunning=!1,n.a.info({title:"Error",message:"钱包载入失败 !",color:"red",timeout:2e3})),o.next=26;break;case 21:o.prev=21,o.t1=o["catch"](13),console.log("出错啦",o.t1),e.progressRunning=!1,n.a.info({title:"Error",message:"钱包载入失败 !",color:"red",timeout:2e3});case 26:case"end":return o.stop()}},o,this,[[0,6],[13,21]])})),console.log("可以传给服务器了")}else console.log("未选择文件"),e.progressRunning=!1,n.a.warning({message:"未选择keystore文件 !",timeout:2e3})},uploadFile:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var o,s,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log("dongle input"),o=e.target.files[0],console.dir(o),s=this.$refs.uploadTip,s.value=o.name,a=new FormData,a.append("file",o),"http://127.0.0.1:4000/users/upload";case 8:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}}}).call(this,o("7f43"))},b6d8:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("h1",[t._v(t._s(t.accesstitle))]),s("v-layout",{staticClass:"create_wrapper",attrs:{"align-start":"","justify-space-around":""}},[t.kscard?s("div",{staticClass:"kscard",on:{click:function(e){return t.ksload()}}},[s("img",{attrs:{src:o("24d0"),alt:""}}),s("h2",[t._v("Via Keystore")])]):t._e(),t.pkcard?s("div",{staticClass:"pkcard",on:{click:function(e){return t.pkload()}}},[s("img",{attrs:{src:o("11d7"),alt:""}}),s("h2",[t._v("Via Privatekey")])]):t._e()]),t.kslayout?s("div",{staticClass:"unlock-keystore"},[s("v-upload"),s("br"),s("div",{staticClass:"inputWrap"},[s("v-text-field",{ref:"inputPwd",staticClass:"input-pwd",attrs:{solo:"","prepend-inner-icon":"vpn_key","append-icon":t.showpwd?"visibility":"visibility_off",type:t.showpwd?"text":"password",name:"input-10-1",label:"Input password to load keystore"},on:{"click:append":function(e){t.showpwd=!t.showpwd}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("v-progress-linear",{ref:"aksProgress",staticClass:"aksProgress",attrs:{indeterminate:t.progressRunning,color:"white","background-color":"#1976d2"}})],1),s("v-btn",{staticClass:"white--text upbtn",attrs:{color:"indigo"},on:{click:t.unlockWithKs}},[t._v("\n            Next\n            "),s("v-icon",{attrs:{right:"",dark:""}},[t._v("cloud_upload")])],1),s("div",{staticClass:"backbtn"},[s("v-btn",{attrs:{outline:"",fab:"",color:"indigo"},on:{click:t.back}},[s("v-icon",[t._v("arrow_back")])],1)],1)],1):t._e(),t.pklayout?s("div",{staticClass:"unlock-privatekey"},[s("div",{staticClass:"inputWrap"},[s("v-text-field",{attrs:{box:"","single-line":"","prepend-inner-icon":"vpn_key","append-icon":t.showpwd?"visibility":"visibility_off",type:t.showpwd?"text":"password",color:"pink",label:"Input privatekey to access wallet"},on:{"click:append":function(e){t.showpwd=!t.showpwd},input:function(e){return t.changePrivatekey(e)}}}),s("v-progress-linear",{ref:"apkProgress",staticClass:"apkProgress",attrs:{indeterminate:t.progressRunning,color:"white","background-color":"pink"}})],1),s("v-btn",{staticClass:"white--text upbtn",attrs:{color:"pink"},on:{click:t.unlockWithPk}},[t._v("\n            Next\n            "),s("v-icon",{attrs:{right:"",dark:""}},[t._v("cloud_upload")])],1),s("div",{staticClass:"backbtn"},[s("v-btn",{attrs:{outline:"",fab:"",color:"indigo"},on:{click:t.back}},[s("v-icon",[t._v("arrow_back")])],1)],1)],1):t._e()],1)},a=[],n=o("a084"),r=n["a"],i=(o("2436"),o("17cc")),c=Object(i["a"])(r,s,a,!1,null,"227010b5",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-383ab972.c63c5c16.js.map